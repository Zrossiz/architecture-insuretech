# Геораспределённая архитектура

Необходимо реализовать геораспределённую архитектуру, поскольку основной трафик приходится на Россию.  

Планируется три зоны доступности: **Москва**, **Владивосток** и ещё один город в центральной части страны. Каждая зона должна иметь конфигурацию, аналогичную текущей первой зоне.

## Работа с базой данных

Предлагается использовать **один мастер-регион** для записи данных, а остальные зоны — **слейв-реплики для чтения**.  
При этом необходимо оптимизировать SQL-запросы, так как текущие проблемы связаны не с нехваткой ресурсов, а с неэффективной работой запросов.

## Определение зоны для пользователя

Перед отправкой запроса в конкретную зону доступности следует определить **географическое положение пользователя**. Для этого можно использовать **GeoDNS**.

## Стратегия отказоустойчивости

Для каждой зоны доступности будет настроена стратегия **Active-Standby**:  
- активная зона обрабатывает трафик,  
- standby — «тёплая», готовая автоматически масштабироваться при необходимости.

## Ограничение нагрузки

Для ограничения нагрузки со стороны отдельных пользователей предлагается внедрить **rate limiter с приоритизацией**.  
Если пользователь превышает порог в **20 RPS**, его запросы автоматически переводятся в очередь с пониженным приоритетом.
